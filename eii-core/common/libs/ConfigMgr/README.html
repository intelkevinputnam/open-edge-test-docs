
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ConfigMgr &#8212; eii-test  documentation</title>
    
  <link href="../../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    
  <link rel="preload" as="script" href="../../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">eii-test  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../eii-azure-bridge/README.html">
   Azure Bridge
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../README.html">
   EII Core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../eii-messagebus/README.html">
   EII Message Bus
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../_sources/eii-core/common/libs/ConfigMgr/README.md.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   ConfigMgr
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#installation">
     Installation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#install-configmgr-with-python-bindings-go-bindings-examples-test-suits-and-debug-build">
     Install ConfigMgr with Python bindings, Go bindings, Examples, Test suits and Debug Build.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#interfaces">
   Interfaces
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publisher-interface">
     <strong>
      Publisher Interface
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#subscriber-interface">
     <strong>
      Subscriber Interface
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#server-interface">
     <strong>
      Server Interface
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#client-interface">
     <strong>
      Client Interface
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#overriding-of-type-and-endpoint">
     Overriding of Type and EndPoint:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#broker-usecase">
     Broker Usecase
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#zmq-tcp-protocol-usecase">
     zmq_tcp Protocol usecase
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#zmqbroker">
       ZmqBroker:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#subscriber">
       Subscriber
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#publisher">
       Publisher
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#zmq-ipc-protocol-usecase">
     zmq_ipc Protocol usecase
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       ZmqBroker:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Subscriber
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       Publisher
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#note-endpoint-can-be-given-in-different-ways">
       <strong>
        Note
       </strong>
       “Endpoint” can be given in different ways:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-examples">
     Running Examples
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cpp-examples">
       CPP Examples
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#python-examples">
       Python Examples
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#go-examples">
       Go Examples
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-unit-tests">
     Running Unit Tests
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creation-of-grpc-deb-file-optional">
     Creation of grpc .deb file (Optional)
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="configmgr">
<h1>ConfigMgr<a class="headerlink" href="#configmgr" title="Permalink to this headline">¶</a></h1>
<p>ConfigMgr (Config manager) provides CPP/Python/Golang APIs to:</p>
<ul class="simple">
<li><p>fetch an applications configs values from the KV store.</p></li>
<li><p>fetch an applications interface values from KV store for pub, sub, server and client.</p></li>
<li><p>watch on application’s config changes.</p></li>
<li><p>generate EII MessageBus config.</p></li>
<li><p>read and set /GlobalEnv variables.</p></li>
<li><p>fetch env variables: appname, dev_mode</p></li>
</ul>
<p>All these data are stored into the kv store of EII during the provisioning phase and can be changed   dynamically by the admin.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>The EIIUtils depends on CMake version 3.11+. For Ubuntu 18.04 this is not
the default version installed via <code class="docutils literal notranslate"><span class="pre">apt-get</span></code>. To install the correct version
of CMake and other ConfigMgr dependencies, please follow <a class="reference internal" href="../../README.html"><span class="doc">eii_libs_installer README</span></a></p>
<p>CMAKE_INSTALL_PREFIX needs to be set for the installation:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>    $ <span class="nb">export</span> <span class="nv">CMAKE_INSTALL_PREFIX</span><span class="o">=</span><span class="s2">&quot;/opt/intel/eii&quot;</span>
</pre></div>
</div>
<p>ConfigMgr installs to <code class="docutils literal notranslate"><span class="pre">/opt/intel/eii/lib/</span></code>. On some platforms this is not included in the <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> by default. As a result, you must add this directory to your <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>,
otherwise you will encounter issues using the ConfigMgr. This can
be accomplished with the following <code class="docutils literal notranslate"><span class="pre">export</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LD_LIBRARY_PATH</span>:/opt/intel/eii/lib/
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p> You can also specify a different library prefix to CMake through
the <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code> flag. If different installation path is given via <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code>, then <code class="docutils literal notranslate"><span class="pre">$LD_LIBRARY_PATH</span></code> should be appended by $CMAKE_INSTALL_PREFIX/lib.</p>
</div>
</div>
<div class="section" id="install-configmgr-with-python-bindings-go-bindings-examples-test-suits-and-debug-build">
<h2>Install ConfigMgr with Python bindings, Go bindings, Examples, Test suits and Debug Build.<a class="headerlink" href="#install-configmgr-with-python-bindings-go-bindings-examples-test-suits-and-debug-build" title="Permalink to this headline">¶</a></h2>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ rm -rf build
$ mkdir build
$ <span class="nb">cd</span> build
$ cmake -DCMAKE_INSTALL_INCLUDEDIR<span class="o">=</span><span class="nv">$CMAKE_INSTALL_PREFIX</span>/include -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="nv">$CMAKE_INSTALL_PREFIX</span> -DWITH_PYTHON<span class="o">=</span>ON -DWITH_GO<span class="o">=</span>ON -DWITH_EXAMPLES<span class="o">=</span>ON -DWITH_TESTS<span class="o">=</span>ON -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug ..
$ make
$ sudo make install
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">WITH_PYTHON=ON</span></code>, <code class="docutils literal notranslate"><span class="pre">WITH_GO=ON</span></code>, <code class="docutils literal notranslate"><span class="pre">WITH_EXAMPLES=ON</span></code>, <code class="docutils literal notranslate"><span class="pre">WITH_TESTS=ON</span></code> and <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE=Debug</span></code> to compile ConfigMgr with Python bindings, Go bindings, Examples, Unit Tests and Debug mode respectively.</p>
</div>
</div>
<div class="section" id="interfaces">
<h1>Interfaces<a class="headerlink" href="#interfaces" title="Permalink to this headline">¶</a></h1>
<p>ConfigMgr parses the data from the kv store (eg: etcd) and the application environment variables for its functionality.
It supports Publisher, Subscriber, Server and Client interfaces. Below are the examples for providing
different interfaces and different usecases.</p>
<p>Please refer <a class="reference external" href="###**Note**-%22endpoint%22-can-be-given-in-different-ways:">different ways of giving endpoints</a></p>
<div class="section" id="publisher-interface">
<h2><strong>Publisher Interface</strong><a class="headerlink" href="#publisher-interface" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Publishers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;camera1_stream&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:65015&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;Visualizer&quot;</span><span class="p">,</span> <span class="s2">&quot;VideoAnalytics&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="table" id="id0">
<caption><span class="caption-text"></span><a class="headerlink" href="#id0" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>

<thead>

<tr class="row-odd">
<th class="head"><p>Key</p></th>

<th class="head"><p>Type</p></th>

<th class="head"><p>Required (Mandatory)</p></th>

<th class="head"><p>Description</p></th>

</tr>

</thead>

<tbody>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">Publishers</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Entire publisher interface will be added with in the array. Multiple publish endpoints can be added by adding elements in the array.</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">Name</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Name of different publisher interfaces</p></td>

</tr>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">Type</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Specifies ZeroMQ protocol (&quot;zmq_tcp&quot; or &quot;zmq_ipc&quot;) on which data will be published</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">EndPoint</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code> or <code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>

<td><p>Yes</p></td>

<td><p>In case of TCP or IPC (socket directory only), endpoint should be string as shown in the above examples. In case IPC explicitly specifying socket file, either object or string can be used for EndPoint. Please refer <a class="reference external" href="###**Note**-&quot;endpoint&quot;-can-be-given-in-different-ways:">Different ways of specifying endpoint</a></p></td>

</tr>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">Topics</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Specifying the topics on which data will be published on. Multiple elements in this array can denote multiple topics published on the same endpoint</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">AllowedClients</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Specifying who can subscribe to the the topic on which data is published. If AllowedClients is &quot;*&quot;, then all the provisioned services can receive the data published.</p></td>

</tr>

</tbody>

</table>
</div>
<div class="section" id="subscriber-interface">
<h2><strong>Subscriber Interface</strong><a class="headerlink" href="#subscriber-interface" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Subscribers&quot;</span><span class="o">:</span> <span class="p">[</span>

        <span class="c1">// tcp usecase</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:65013&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PublisherAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;VideoIngestion&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>

        <span class="c1">// ipc usecase</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;.socks&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PublisherAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;VideoIngestion&quot;</span><span class="p">,</span>
            <span class="c1">// Topics cannot be &quot;*&quot;, if the only IPC directory is given</span>
            <span class="c1">// if it Topics &quot;*&quot; to be used in ipc, then socket file should be given explicitly.</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;camera1_stream&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="table" id="id0">
<caption><span class="caption-text"></span><a class="headerlink" href="#id0" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>

<thead>

<tr class="row-odd">
<th class="head"><p>Key</p></th>

<th class="head"><p>Type</p></th>

<th class="head"><p>Required (Mandatory)</p></th>

<th class="head"><p>Description</p></th>

</tr>

</thead>

<tbody>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">Subscribers</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Entire subscriber interface will be added with in the array. Multiple subscribe endpoints can be added by adding elements in the array</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">Name</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Name of different subscriber interfaces</p></td>

</tr>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">Type</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Specifies ZeroMQ protocol (&quot;zmq_tcp&quot; or &quot;zmq_ipc&quot;) through which subscription happens</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">EndPoint</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code> or <code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>

<td><p>Yes</p></td>

<td><p>In case of TCP or IPC (socket directory only), endpoint should be string as shown in the above examples. In Case IPC explicitly specifying socket file, either object or string can be used for EndPoint. Please refer <a class="reference external" href="###**Note**-&quot;endpoint&quot;-can-be-given-in-different-ways:">Different ways of specifying endpoint</a></p></td>

</tr>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">PublisherAppName</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Specifies the publisher's AppName through which data will be received</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">Topics</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Specifying the topics on which data will be published on. If Topics is &quot;*&quot;, the subscriber receives all the data published on the endpoint, irrespective of the topic names data is published on. Multiple elements in this array can denote multiple topics subscribed on the same endpoint</p></td>

</tr>

</tbody>

</table>
</div>
<div class="section" id="server-interface">
<h2><strong>Server Interface</strong><a class="headerlink" href="#server-interface" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Servers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// tcp usecase</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:9006&quot;</span><span class="p">,</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;VideoAnalytics&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="c1">//ipc usecase</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;VideoAnalytics&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="table" id="id0">
<caption><span class="caption-text"></span><a class="headerlink" href="#id0" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>

<thead>

<tr class="row-odd">
<th class="head"><p>Key</p></th>

<th class="head"><p>Type</p></th>

<th class="head"><p>Required (Mandatory)</p></th>

<th class="head"><p>Description</p></th>

</tr>

</thead>

<tbody>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">Servers</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Entire server interface will be added with in the array. Multiple server endpoints can be added by adding elements in the array</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">Name</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Name of different server interfaces</p></td>

</tr>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">Type</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Specifies ZeroMQ protocol (&quot;zmq_tcp&quot; or &quot;zmq_ipc&quot;) through which Server pushes data</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">EndPoint</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code> or <code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>

<td><p>Yes</p></td>

<td><p>In case of TCP or IPC (socket directory only), endpoint should be string as shown in the above examples. In case IPC explicitly specifying socket file, either object or string can be used for EndPoint. Please refer <a class="reference external" href="###**Note**-&quot;endpoint&quot;-can-be-given-in-different-ways:">Different ways of specifying endpoint</a></p></td>

</tr>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">AllowedClients</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Specifying who can get data is from the Server. If AllowedClients is &quot;*&quot;, then all the provisioned services can connect to Server.</p></td>

</tr>

</tbody>

</table>
</div>
<div class="section" id="client-interface">
<h2><strong>Client Interface</strong><a class="headerlink" href="#client-interface" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Clients&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// tcp usecase</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ServerAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;VideoIngestion&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:9006&quot;</span>
        <span class="p">},</span>

        <span class="c1">// ipc usecase</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ServerAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;VideoIngestion&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="table" id="id0">
<caption><span class="caption-text"></span><a class="headerlink" href="#id0" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>

<thead>

<tr class="row-odd">
<th class="head"><p>Key</p></th>

<th class="head"><p>Type</p></th>

<th class="head"><p>Required (Mandatory)</p></th>

<th class="head"><p>Description</p></th>

</tr>

</thead>

<tbody>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">Clients</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Entire client interface will be added with in the array. Multiple client endpoints can be added by adding elements in the array</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">Name</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Name of different client interfaces</p></td>

</tr>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">ServerAppName</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Server's AppName to which client connection is established</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">Type</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>Specifies ZeroMQ protocol (&quot;zmq_tcp&quot; or &quot;zmq_ipc&quot;) through which client connection is established</p></td>

</tr>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">EndPoint</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code> or <code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>

<td><p>Yes</p></td>

<td><p>In case of TCP or IPC (socket directory only), endpoint should be string as shown in the above examples. In case IPC explicitly specifying socket file, either object or string can be used for EndPoint. Please refer <a class="reference external" href="###**Note**-&quot;endpoint&quot;-can-be-given-in-different-ways:">Different ways of specifying endpoint</a></p></td>

</tr>

</tbody>

</table>
</div>
<div class="section" id="overriding-of-type-and-endpoint">
<h2>Overriding of Type and EndPoint:<a class="headerlink" href="#overriding-of-type-and-endpoint" title="Permalink to this headline">¶</a></h2>
<p>In a given publisher, subscriber, client or server interfaces, the “Type” and “Endpoint” values mentioned in the respective interfaces can be overriden by setting them as env variables.</p>
<p>Let’s take publisher as an example having multiple endpoints and below is its interface:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Publishers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;camera1_stream&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:65015&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;Visualizer&quot;</span><span class="p">,</span> <span class="s2">&quot;VideoAnalytics&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Let’s say we want to override the Type (“zmq_ipc”) and Endpoint (“/EII/sockets”) of the first publisher’s interface (interface having “Name”:”default”), then env variable should be set with below syntax.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PUBLISHER_default_TYPE</span><span class="o">=</span><span class="s2">&quot;zmq_tcp&quot;</span>
<span class="nb">export</span> <span class="nv">PUBLISHER_default_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;127.0.0.1:65013&quot;</span>
</pre></div>
</div>
<p>In the above command <code class="docutils literal notranslate"><span class="pre">default</span></code> is the <code class="docutils literal notranslate"><span class="pre">Name</span></code> of the interface.</p>
<p>Similarly, we can override subscriber’s, client’s and server’s Type and Endpoint.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">SUBSCRIBER_default_TYPE</span><span class="o">=</span><span class="s2">&quot;zmq_tcp&quot;</span>
<span class="nb">export</span> <span class="nv">SUBSCRIBER_default_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;127.0.0.1:65013&quot;</span>

<span class="nb">export</span> <span class="nv">SERVER_default_TYPE</span><span class="o">=</span><span class="s2">&quot;zmq_tcp&quot;</span>
<span class="nb">export</span> <span class="nv">SERVER_default_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;127.0.0.1:65013&quot;</span>

<span class="nb">export</span> <span class="nv">CLIENT_default_TYPE</span><span class="o">=</span><span class="s2">&quot;zmq_tcp&quot;</span>
<span class="nb">export</span> <span class="nv">CLIENT_default_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;127.0.0.1:65013&quot;</span>
</pre></div>
</div>
<p>Let’s take publisher as an example having single endpoint and below is its interface:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Publishers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;camera1_stream&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If we want to override the Type (“zmq_ipc”) and Endpoint (“/EII/sockets”) of publisher’s interface, then env variable should be set with below syntax.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PUBLISHER_TYPE</span><span class="o">=</span><span class="s2">&quot;zmq_tcp&quot;</span>
<span class="nb">export</span> <span class="nv">PUBLISHER_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;127.0.0.1:65013&quot;</span>
</pre></div>
</div>
<p>Similarly, we can override subscriber’s, client’s and server’s Type and Endpoint.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">SUBSCRIBER_TYPE</span><span class="o">=</span><span class="s2">&quot;zmq_tcp&quot;</span>
<span class="nb">export</span> <span class="nv">SUBSCRIBER_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;127.0.0.1:65013&quot;</span>

<span class="nb">export</span> <span class="nv">SERVER_TYPE</span><span class="o">=</span><span class="s2">&quot;zmq_tcp&quot;</span>
<span class="nb">export</span> <span class="nv">SERVER_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;127.0.0.1:65013&quot;</span>

<span class="nb">export</span> <span class="nv">CLIENT_TYPE</span><span class="o">=</span><span class="s2">&quot;zmq_tcp&quot;</span>
<span class="nb">export</span> <span class="nv">CLIENT_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;127.0.0.1:65013&quot;</span>
</pre></div>
</div>
<p>Overriding feature of ConfigMgr will be used in orchestrated scenarios including Kubernetes.</p>
</div>
<div class="section" id="broker-usecase">
<h2>Broker Usecase<a class="headerlink" href="#broker-usecase" title="Permalink to this headline">¶</a></h2>
<p>If publisher and subscriber wants to communicate via broker(ZmqBroker), i.e., if publisher publish data to ZmqBroker and subscriber subscribes from ZmqBroker, then the interfaces of ZmqBroker, subscriber and publisher with respect to <code class="docutils literal notranslate"><span class="pre">zmq_tcp</span></code> and <code class="docutils literal notranslate"><span class="pre">zmq_ipc</span></code> protocol as follows.</p>
</div>
<div class="section" id="zmq-tcp-protocol-usecase">
<h2>zmq_tcp Protocol usecase<a class="headerlink" href="#zmq-tcp-protocol-usecase" title="Permalink to this headline">¶</a></h2>
<div class="section" id="zmqbroker">
<h3>ZmqBroker:<a class="headerlink" href="#zmqbroker" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="c1">//X-PUB</span>
    <span class="s2">&quot;Publishers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:5568&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;backend&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="c1">// X-SUB</span>
    <span class="s2">&quot;Subscribers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:5569&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;frontend&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PublisherAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="subscriber">
<h3>Subscriber<a class="headerlink" href="#subscriber" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Subscribers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:5568&quot;</span><span class="p">,</span>

            <span class="c1">// PublisherAppName will be &quot;ZmqBroker&quot; in case of brokered usecase </span>
            <span class="s2">&quot;PublisherAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;ZmqBroker&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="publisher">
<h3>Publisher<a class="headerlink" href="#publisher" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Publishers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:5569&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;camera1_stream&quot;</span>
            <span class="p">],</span>
            <span class="c1">// With broker usecase, AllowedClients in Publisher&#39;s interface is not required, as it acts as a subscriber to X-SUB</span>

            <span class="c1">// &quot;brokered&quot; and &quot;BrokerAppName&quot; should be added for ZmqBroker usecase</span>
            <span class="s2">&quot;brokered&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s2">&quot;BrokerAppName&quot;</span> <span class="o">:</span> <span class="s2">&quot;ZmqBroker&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="zmq-ipc-protocol-usecase">
<h2>zmq_ipc Protocol usecase<a class="headerlink" href="#zmq-ipc-protocol-usecase" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>ZmqBroker:<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Publishers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;backend&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;SocketDir&quot;</span><span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SocketFile&quot;</span><span class="o">:</span> <span class="s2">&quot;backend-socket&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;Subscribers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;frontend&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;SocketDir&quot;</span><span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SocketFile&quot;</span><span class="o">:</span> <span class="s2">&quot;frontend-socket&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;PublisherAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;AllowedClients&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Subscriber<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Subscribers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;SocketDir&quot;</span> <span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SocketFile&quot;</span><span class="o">:</span> <span class="s2">&quot;backend-socket&quot;</span>
            <span class="p">},</span>

            <span class="c1">// PublisherAppName will be &quot;ZmqBroker&quot; in case of brokered usecase </span>
            <span class="s2">&quot;PublisherAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;ZmqBroker&quot;</span><span class="p">,</span>

            <span class="c1">// Topics cannot be &quot;*&quot;, if the only IPC directory is given</span>
            <span class="c1">// if it Topics &quot;*&quot; to be used in ipc, then socket file should be given explicitly.</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>Publisher<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Publishers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;SocketDir&quot;</span> <span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SocketFile&quot;</span><span class="o">:</span> <span class="s2">&quot;frontend-socket&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;camera1_stream&quot;</span>
            <span class="p">],</span>

            <span class="c1">// With broker usecase, AllowedClients in Publisher&#39;s interface is not required, as it acts as a subscriber to X-SUB</span>

            <span class="c1">// &quot;brokered&quot; and &quot;BrokerAppName&quot; should be added for ZmqBroker usecase</span>
            <span class="s2">&quot;brokered&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s2">&quot;BrokerAppName&quot;</span> <span class="o">:</span> <span class="s2">&quot;ZmqBroker&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="table" id="id0">
<caption><span class="caption-text"></span><a class="headerlink" href="#id0" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>

<thead>

<tr class="row-odd">
<th class="head"><p>Key</p></th>

<th class="head"><p>Type</p></th>

<th class="head"><p>Required (Mandatory)</p></th>

<th class="head"><p>Description</p></th>

</tr>

</thead>

<tbody>

<tr class="row-even">
<td><p><code class="docutils literal notranslate"><span class="pre">brokered</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>

<td><p>Yes</p></td>

<td><p>(Required if publishing via ZmqBroker) Specifies if publisher is using broker or not. use &quot;brokered&quot;: true for use with broker.</p></td>

</tr>

<tr class="row-odd">
<td><p><code class="docutils literal notranslate"><span class="pre">BrokerAppName</span></code></p></td>

<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>

<td><p>Yes</p></td>

<td><p>(Required if publishing via ZmqBroker) Specifies ZeroMQ Broker app name</p></td>

</tr>

</tbody>

</table>
</div>
<div class="section" id="note-endpoint-can-be-given-in-different-ways">
<h3><strong>Note</strong> “Endpoint” can be given in different ways:<a class="headerlink" href="#note-endpoint-can-be-given-in-different-ways" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>zmq_tcp Endpoint should look like below:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Endpoint&quot;</span><span class="o">:</span><span class="s2">&quot;127.0.0.1:65013&quot;</span>
</pre></div>
</div>
</li>
<li><p>zmq_ipc Endpoint have different ways of giving.</p>
<ul>
<li><p>Specifying just socket directory</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Endpoint&quot;</span><span class="o">:</span><span class="s2">&quot;/EII/sockets&quot;</span>
</pre></div>
</div>
</li>
<li><p>Specifying socket directory and socket file</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Endpoint&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;SocketDir&quot;</span> <span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SocketFile&quot;</span><span class="o">:</span> <span class="s2">&quot;socketfile&quot;</span>
<span class="p">}</span>

<span class="nx">or</span>

<span class="s2">&quot;Endpoint&quot;</span><span class="o">:</span><span class="s2">&quot;/EII/sockets, socketfile&quot;</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="running-examples">
<h2>Running Examples<a class="headerlink" href="#running-examples" title="Permalink to this headline">¶</a></h2>
<p>The ConfigMgr library also supports Cpp APIs and Python &amp; Go bindings. These APIs/bindings can be used in Cpp and Python/Go services in the EII stack to fetch required config/interfaces/msgbus config.</p>
<p>Examples will only be compiled if the <code class="docutils literal notranslate"><span class="pre">WITH_EXAMPLES=ON</span></code> option is specified while running CMake.
Please refer <a class="reference external" href="###-install-configMgr-with-examples,-test-suits-and-debug-build-enabled.">Examples installation</a></p>
<p>Refer the interfaces of publisher and server in <a class="reference external" href="./examples/configs/VideoIngestion_interfaces.json">./examples/configs/VideoIngestion_interfaces.json</a> and for subscriber and client, refer <a class="reference external" href="./examples/configs/VideoAnalytics_interfaces.json">./examples/configs/VideoAnalytics_interfaces.json</a></p>
<p>Examples on demonstrating the usage of these APIs in the bindings have been given in respective sections below.</p>
<ul class="simple">
<li><p><a class="reference external" href="###-cpp-examples">CPP Examples</a></p></li>
<li><p><a class="reference external" href="###-python-examples">Python Examples</a></p></li>
<li><p><a class="reference external" href="###-go-examples">Go Examples</a></p></li>
</ul>
<div class="section" id="cpp-examples">
<h3>CPP Examples<a class="headerlink" href="#cpp-examples" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ Navigate to <span class="o">[</span>WORKDIR<span class="o">]</span>/IEdgeInsights/common/libs/ConfigMgr
$ sudo rm -rf build
$ mkdir build
$ <span class="nb">cd</span> build
$ cmake -DCMAKE_INSTALL_INCLUDEDIR<span class="o">=</span><span class="nv">$CMAKE_INSTALL_PREFIX</span>/include -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="nv">$CMAKE_INSTALL_PREFIX</span> -DWITH_EXAMPLES<span class="o">=</span>ON ..
$ make
$ sudo make install
</pre></div>
</div>
<p>There are currently 5 CPP examples:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">examples/sample_pub.cpp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/sample_sub.cpp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/sample_server.cpp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/sample_client.cpp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/sample_getvalue.cpp</span></code></p></li>
</ol>
<p>All of the Cpp example executables are in the <code class="docutils literal notranslate"><span class="pre">build/examples/</span></code> directory. To run
them, execute the following command:</p>
<p>Before executing any of the examples, please run below command from <code class="docutils literal notranslate"><span class="pre">build/examples/</span></code></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span> <span class="nb">cd</span> ../../examples/ <span class="o">&amp;&amp;</span> <span class="nb">source</span> ./env.sh <span class="o">&amp;&amp;</span> <span class="nb">cd</span> -
</pre></div>
</div>
<p>Publisher example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ./pub
</pre></div>
</div>
<p>Subscriber example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ./sub
</pre></div>
</div>
<p>Server example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ./server
</pre></div>
</div>
<p>Client example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ./client
</pre></div>
</div>
<p>Sample_getvalue used to get the values from application’s config</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ./sample_app
</pre></div>
</div>
</div>
<div class="section" id="python-examples">
<h3>Python Examples<a class="headerlink" href="#python-examples" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ Navigate to <span class="o">[</span>WORKDIR<span class="o">]</span>/IEdgeInsights/common/libs/ConfigMgr
$ sudo rm -rf build
$ mkdir build
$ <span class="nb">cd</span> build
$ cmake -DCMAKE_INSTALL_INCLUDEDIR<span class="o">=</span><span class="nv">$CMAKE_INSTALL_PREFIX</span>/include -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="nv">$CMAKE_INSTALL_PREFIX</span> -DWITH_PYTHON<span class="o">=</span>ON ..
$ make
$ sudo make install
</pre></div>
</div>
<p>There are currently 5 Python examples:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">examples/publisher.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/subscriber.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/echo_service.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/echo_client.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/sample_get_value.py</span></code></p></li>
</ol>
<p>All of the py examples are in <code class="docutils literal notranslate"><span class="pre">python/examples/</span></code> directory. To run
them, execute the following command:</p>
<p>Before executing any of the examples, please run below command from <code class="docutils literal notranslate"><span class="pre">python/examples/</span></code></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span> <span class="nb">cd</span> ../../examples/ <span class="o">&amp;&amp;</span> <span class="nb">source</span> ./env.sh <span class="o">&amp;&amp;</span> <span class="nb">cd</span> -
</pre></div>
</div>
<p>Publisher example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python3 publisher.py
</pre></div>
</div>
<p>Subscriber example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python3 subscriber.py
</pre></div>
</div>
<p>Server example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python3 echo_service.py
</pre></div>
</div>
<p>Client example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python3 echo_client.py
</pre></div>
</div>
<p>sample_get_value used to get the values from application’s config</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python3 sample_get_value.py
</pre></div>
</div>
</div>
<div class="section" id="go-examples">
<h3>Go Examples<a class="headerlink" href="#go-examples" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ Navigate to <span class="o">[</span>WORKDIR<span class="o">]</span>/IEdgeInsights/common/libs/ConfigMgr/go
$ cp -r ConfigMgr/ <span class="nv">$GOPATH</span>/src
$ <span class="nb">cd</span> ConfigMgr/examples
$ <span class="nb">source</span> go_env.sh
</pre></div>
</div>
<p>There are currently 5 Go examples:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">publisher.go</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subscriber.go</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">echo_service.go</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">echo_client.go</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">app_config.go</span></code></p></li>
</ol>
<p>All of the go examples are in <code class="docutils literal notranslate"><span class="pre">go/examples/</span></code> directory. To run
them, execute the following command:</p>
<p>Before executing any of the examples, please run below command from <code class="docutils literal notranslate"><span class="pre">go/ConfigMgr/examples/</span></code></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span> <span class="nb">cd</span> ../../../examples/ <span class="o">&amp;&amp;</span> <span class="nb">source</span> ./env.sh <span class="o">&amp;&amp;</span> <span class="nb">cd</span> -
 <span class="nb">source</span> ./go_env.sh
</pre></div>
</div>
<p>Publisher example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ go build publisher.go
$ ./publisher
</pre></div>
</div>
<p>Subscriber example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ go build subscriber.go
$ ./subscriber
</pre></div>
</div>
<p>Server example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ go build echo_service.go
$ ./echo_service
</pre></div>
</div>
<p>Client example.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ go build echo_client.go
$ ./echo_client
</pre></div>
</div>
<p>app_config used to get the values from application’s config</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ go build app_config.go
$ ./app_config
</pre></div>
</div>
</div>
</div>
<div class="section" id="running-unit-tests">
<h2>Running Unit Tests<a class="headerlink" href="#running-unit-tests" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p></p>
</div>
<ul class="simple">
<li><p>The unit tests will only be compiled if the <code class="docutils literal notranslate"><span class="pre">WITH_TESTS=ON</span></code> option is specified when running CMake.
Please refer <a class="reference external" href="###-install-configMgr-with-examples,-test-suits-and-debug-build-enabled.">Unit Test installation</a> installation.</p></li>
<li><p>Provisioning should be done to start etcd server in dev/prod mode and to generate application specific certificates(only in prod mode).</p></li>
</ul>
<p>Before executing any of the test files, please run below command from <code class="docutils literal notranslate"><span class="pre">build/tests/</span></code></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span> <span class="nb">cd</span> ../../examples/ <span class="o">&amp;&amp;</span> <span class="nb">source</span> ./env.sh <span class="o">&amp;&amp;</span> <span class="nb">cd</span> -
</pre></div>
</div>
<ul class="simple">
<li><p>To run ConfigMgr unit tests</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./config_manager_unit_tests
$ ./kvstore_client-tests
</pre></div>
</div>
</div>
<div class="section" id="creation-of-grpc-deb-file-optional">
<h2>Creation of grpc .deb file (Optional)<a class="headerlink" href="#creation-of-grpc-deb-file-optional" title="Permalink to this headline">¶</a></h2>
<p><strong>Note</strong>: This is an optional as we have already created .deb file in the repo.
If user wants to create .deb file freshly, then one has to follow this step.</p>
<p>Navigate to <code class="docutils literal notranslate"><span class="pre">[WORKDIR]/IEdgeInsights/common/libs/ConfigMgr</span></code> and run the <code class="docutils literal notranslate"><span class="pre">grpc_deb.sh</span></code></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo ./grpc_deb.sh
</pre></div>
</div>
<p>By executing the above script, <code class="docutils literal notranslate"><span class="pre">grpc-1.29.0-Linux.deb</span></code> will be created in
<code class="docutils literal notranslate"><span class="pre">[WORKDIR]/IEdgeInsights/common/libs/ConfigMgr</span></code>.</p>
</div>
</div>


              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By various<br/>
        
            &copy; Copyright 2021, various.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>